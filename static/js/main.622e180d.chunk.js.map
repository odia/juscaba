{"version":3,"sources":["minisearch.config.js","images/system-search-symbolic.svg","Box.tsx","Section.tsx","Button.tsx","Highlighter.tsx","Document.tsx","Actuacion.tsx","Expediente.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["module","exports","main","fields","storeFields","idField","search","prefix","term","length","fuzzy","Box","props","className","id","children","Section","onSubmit","event","preventDefault","title","Button","selected","onClick","Highlighter","text","useState","Fragment","highlightedText","setHighlightedText","useEffect","updateFragment","slice","index","RegExp","Math","max","Document","data","expanded","setExpanded","content","href","URL","Actuacion","titulo","documentos","map","d","ExpedienteLoader","file","setData","error","setError","minisearch","setMinisearch","undefined","fetch","process","then","res","json","catch","e","toString","ms","MiniSearch","loadJSON","MiniSearchConfig","Expediente","Actuaciones","caratula","actuaciones","setActuaciones","actsId","docsURL","i","push","actId","filter","act","includes","a","fechaFirma","App","setSearch","expedientes","setExpedientes","setSelected","forEach","expediente","type","name","onChange","target","value","placeholder","src","searchImg","alt","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.622e180d.chunk.js","sourcesContent":["module.exports = {\n  main: {\n    fields: ['caratula', 'firmantes', 'titulo', 'content', 'URL'],\n    storeFields: ['URL', 'ExpId', 'actId'],\n    idField: 'numeroDeExpediente'\n  },\n  search: {\n    prefix: term => term.length > 3,\n    fuzzy: term => term.length > 3 ? 0.2 : false\n  }\n}\n","export default __webpack_public_path__ + \"static/media/system-search-symbolic.2e215c42.svg\";","import React from 'react';\nimport './Box.css';\n\ninterface BoxIface {\n  id?: string\n}\n\nfunction Box(props: React.PropsWithChildren<BoxIface>) {\n  return (\n    <div className=\"box\" id={props.id}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default Box;\n","import React, { ReactElement } from 'react';\nimport Box from './Box';\nimport './Section.css';\n\ninterface SectionIface {\n  title?: string | ReactElement\n}\nfunction Section(props: React.PropsWithChildren<SectionIface>) {\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n  }\n  return (\n    <Box>\n      <form onSubmit={handleSubmit}>\n        <fieldset>\n          {props.title && <legend>{props.title}</legend>}\n          {props.children}\n        </fieldset>\n      </form>\n    </Box>\n  )\n}\n\nexport default Section\n","import React from 'react'\nimport './Button.css'\n\ninterface ButtonIface {\n  onClick?: Function\n  href?: string\n  selected?: boolean\n}\n\nconst Button = ({ selected, onClick, ...props }: React.PropsWithChildren<ButtonIface>) => {\n  const handleOnClick = (event: React.MouseEvent<HTMLAnchorElement>) => {\n    onClick && onClick(props)\n  }\n\n  return (<a className={`button ${selected ? 'selected' : null}`}\n    onClick={handleOnClick} {...props}>\n    {props.children}\n  </a>)\n}\nexport default Button;\n","import React, { useState, useEffect } from 'react'\nimport './Highlighter.css'\n\ninterface HighlighterProps {\n  text: string\n  term?: string\n  length?: number\n}\n\nfunction Highlighter({ text, term, length }: React.PropsWithChildren<HighlighterProps>) {\n  const [highlightedText, setHighlightedText] = useState(<React.Fragment>{text}</React.Fragment>)\n  useEffect(() => {\n    const updateFragment = () => {\n      setHighlightedText(<React.Fragment>\n        <span className=\"no-hl\">{length ? text.slice(0, length) : text}</span>\n      </React.Fragment>)\n    }\n\n    if (!term) {\n      updateFragment();\n      return;\n    };\n\n    const index = text.search(new RegExp(term, 'i'))\n\n    if (index === -1) {\n      updateFragment();\n      return;\n    };\n\n    setHighlightedText(<React.Fragment>\n      <span className=\"no-hl\">{text.slice(length ? Math.max(0, index - (length / 2)) : 0, index)}</span>\n      <span className=\"hl\">{text.slice(index, index + term.length)}</span>\n      <span className=\"no-hl\">{length ? text.slice(index + term.length, index + term.length + (length / 2)) : text.slice(index + term.length)}</span>\n    </React.Fragment>)\n  }, [text, term, length])\n\n  return (\n    <span>\n      {highlightedText}\n    </span>\n  )\n}\n\nexport default Highlighter\n","import React, { useState } from 'react';\nimport Box from './Box';\nimport Button from './Button';\nimport { SearchData } from './Search';\nimport Highlighter from './Highlighter';\n\nexport interface DocumentData {\n  URL: string;\n  content: string;\n}\n\nexport interface DocumentProps {\n  data: DocumentData\n  search: SearchData\n}\nfunction Document({ data, search }: React.PropsWithChildren<DocumentProps>) {\n  const [expanded, setExpanded] = useState(false);\n\n  return (<Box>\n    <div>\n      <Highlighter text={data.content} term={search.term} length={expanded ? 0 : 200} />\n    </div>\n    <div>\n      <Button onClick={() => setExpanded(!expanded)} selected={expanded}>expandir</Button>\n      <Button href={data.URL}>descargar</Button>\n    </div>\n  </Box >)\n}\nexport default Document\n","import React from 'react';\nimport Document, { DocumentData } from './Document';\nimport { SearchData } from './Search';\nimport Section from './Section';\nimport Highlighter from './Highlighter';\n\nexport interface ActuacionData {\n  actId: number\n  anio: number\n  cuij: string\n  documentos: DocumentData[]\n  titulo: string\n  fechaFirma: number\n}\n\nexport interface ActuacionProps {\n  data: ActuacionData\n  search: SearchData\n}\nfunction Actuacion({ data, search }: React.PropsWithChildren<ActuacionProps>) {\n  return (\n    <Section title={<Highlighter text={data.titulo} term={search.term} />}>\n      {data.documentos.map((d) => <Document key={d.URL} data={d} search={search} />)}\n    </Section>\n  )\n}\nexport default Actuacion\n","import React, { useState, useEffect } from 'react';\nimport Section from './Section';\nimport Actuacion, { ActuacionData } from './Actuacion';\nimport { SearchData } from './Search';\nimport Highlighter from './Highlighter';\n\nimport MiniSearchConfig from './minisearch.config'\nimport MiniSearch from 'minisearch'\n\nexport interface ExpedienteURL {\n  id: string\n  file: string\n  selected?: boolean\n  search?: string\n}\n\nexport interface ExpedienteData {\n  expId: number\n  caratula: string\n  Actuaciones: ActuacionData[]\n}\n\nexport interface ExpedienteProps {\n  data: ExpedienteData\n  search: SearchData\n}\n\nexport function ExpedienteLoader({ file, search }: ExpedienteURL) {\n  const [data, setData] = useState<ExpedienteData>();\n  const [error, setError] = useState<string>();\n\n  const [minisearch, setMinisearch] = useState<MiniSearch>();\n\n  useEffect(() => {\n    setError(undefined)\n    setData(undefined)\n    fetch(`${process.env.PUBLIC_URL}/data/${file}.json`)\n      .then(res => res.json())\n      .then(setData)\n      .catch(e => {\n        setError(error => error + 'DATA: ' + e.toString());\n      })\n  }, [file])\n\n  useEffect(() => {\n    setError(undefined)\n    fetch(`${process.env.PUBLIC_URL}/data/${file}-index.json`)\n      .then(res => res.text())\n      .then(json => {\n        const ms = MiniSearch.loadJSON(json, MiniSearchConfig.main)\n        setMinisearch(ms)\n      })\n      .catch(e => {\n        setError(error => error + 'INDEX:' + e.toString());\n      })\n  }, [file])\n\n  if (error) return (<h2>{error}</h2>)\n  if (data && minisearch) return (<Expediente data={data} search={{ term: search, minisearch }} />)\n  return (<p>loading ...</p>)\n}\n\nfunction Expediente({ data: { Actuaciones, caratula }, search }: ExpedienteProps) {\n  const [actuaciones, setActuaciones] = useState<ActuacionData[]>()\n\n  useEffect(() => {\n    if (!search.term) {\n      setActuaciones(Actuaciones)\n      return\n    }\n    const res = search.minisearch.search(search.term, MiniSearchConfig.search)\n\n    const actsId: number[] = []\n    const docsURL: string[] = []\n    for (let i = 0; i < res.length; i++) {\n      actsId.push(res[i].actId);\n      docsURL.push(res[i].URL)\n    }\n\n    setActuaciones(Actuaciones\n      .filter((act) => actsId.includes(act.actId))\n      .map(({ documentos, ...act }) => ({\n        ...act,\n        documentos: documentos.filter((d) => docsURL.includes(d.URL))\n      }))\n    )\n  }, [Actuaciones, search])\n\n  return (\n    <Section title={<Highlighter text={caratula} term={search.term} />}>\n      {\n        actuaciones && actuaciones.map((a) => (\n          <Actuacion key={a.actId || a.fechaFirma} data={a} search={search} />\n        ))\n      }\n    </Section>\n  )\n}\nexport default Expediente\n","import React, { useState, useEffect } from 'react';\nimport searchImg from './images/system-search-symbolic.svg';\nimport './App.css';\nimport Box from './Box';\nimport Section from './Section';\nimport Button from './Button';\n\nimport { ExpedienteURL, ExpedienteLoader } from './Expediente';\n\nfunction App() {\n  const [search, setSearch] = useState(\"\");\n  const [expedientes, setExpedientes] = useState<ExpedienteURL[]>([]);\n  const [selected, setSelected] = useState<ExpedienteURL>();\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    event.preventDefault();\n    setSearch(event.target.value)\n  }\n\n  useEffect(() => {\n    (async () => {\n      const res = await fetch(`${process.env.PUBLIC_URL}/data/expedientes.json`);\n      const json = await res.json();\n      setExpedientes(json)\n    })();\n  }, [])\n\n  useEffect(() => {\n    if (!selected && expedientes.length) {\n      setSelected(expedientes[0])\n    }\n  }, [expedientes])\n\n  useEffect(() => {\n    if (!expedientes.length) return;\n    expedientes.forEach((expediente) => {\n      // warm up cache\n      fetch(`${process.env.PUBLIC_URL}/data/${expediente.file}.json`)\n      fetch(`${process.env.PUBLIC_URL}/data/${expediente.file}-index.json`)\n    })\n  }, [expedientes])\n\n  return (\n    <div className=\"App\">\n      <Box id=\"title\">\n        <h1>Buscador de Actuaciones de O.D.I.A.</h1>\n      </Box>\n      <Section title=\"buscar\">\n        <input type=\"search\" id=\"search-input\" name=\"search\"\n          onChange={handleChange} value={search} placeholder=\"buscar...\" />\n        <img src={searchImg} alt=\"\" />\n      </Section>\n      <Section title=\"expedientes\">\n        {(expedientes.length)\n          ? expedientes.map(({ id }, i) =>\n            <Button key={i}\n              onClick={(e: React.MouseEvent<HTMLElement>) => setSelected(expedientes[i])}\n              selected={selected === expedientes[i]}>\n              {id}\n            </Button>)\n          : <p>loading...</p>}\n        {selected !== undefined && <ExpedienteLoader {...selected} search={search} />}\n      </Section>\n    </div >\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}