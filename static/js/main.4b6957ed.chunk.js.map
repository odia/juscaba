{"version":3,"sources":["images/system-search-symbolic.svg","Box.tsx","Section.tsx","Button.tsx","Document.tsx","Actuacion.tsx","Expediente.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Box","props","className","id","children","Section","title","onSubmit","event","preventDefault","Button","selected","Document","nombre","href","sha1","URL","Actuacion","titulo","documentos","map","d","ExpedienteLoader","useState","data","setData","error","setError","errorIndex","setErrorIndex","minisearch","setMinisearch","useEffect","undefined","fetch","process","file","then","res","json","catch","e","toString","text","ms","MiniSearch","loadJSON","fields","storeFields","idField","Expediente","search","actuaciones","setActuaciones","actsId","r","actId","docsURL","Actuaciones","filter","act","includes","caratula","a","i","App","setSearch","expedientes","setExpedientes","setSelected","length","forEach","expediente","onClick","type","name","onChange","target","value","placeholder","src","searchImg","alt","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4b6957ed.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/system-search-symbolic.2e215c42.svg\";","import React from 'react';\nimport './Box.css';\n\ninterface BoxIface {\n  id?: string\n}\n\nfunction Box(props: React.PropsWithChildren<BoxIface>) {\n  return (\n    <div className=\"box\" id={props.id}>\n      {props.children}\n    </div>\n  )\n}\n\nexport default Box;\n","import React from 'react';\nimport Box from './Box';\nimport './Section.css';\n\ninterface SectionIface {\n  title?: string\n}\nfunction Section(props: React.PropsWithChildren<SectionIface>) {\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\n    event.preventDefault();\n  }\n  return (\n    <Box id={props.title}>\n      <form onSubmit={handleSubmit}>\n        <fieldset>\n          {props.title && <legend>{props.title}</legend>}\n          {props.children}\n        </fieldset>\n      </form>\n    </Box>\n  )\n}\n\nexport default Section\n","import React from 'react'\nimport './Button.css'\n\ninterface ButtonIface {\n  onClick?: React.MouseEventHandler<HTMLAnchorElement>\n  href?: string\n  selected?: boolean\n}\n\nconst Button = (props: React.PropsWithChildren<ButtonIface>) => {\n  return (<a className={`button ${props.selected ? 'selected' : null}`} {...props}>\n    {props.children}\n  </a>)\n}\nexport default Button;\n","import sha1 from 'js-sha1';\n\nimport React from 'react';\nimport Box from './Box';\nimport Button from './Button';\n\nexport interface DocumentData {\n  URL: string;\n  content: string;\n  nombre: string;\n}\n\nfunction Document(props: React.PropsWithChildren<DocumentData>) {\n  return (<Box>\n    <div>\n      {props.nombre}\n      <Button href={'http://srfp-documentos.odia.legal/' + sha1(props.URL) + '.pdf'}>ver</Button>\n    </div>\n  </Box>)\n}\nexport default Document\n","import React from 'react';\nimport Document, { DocumentData } from './Document';\nimport Section from './Section';\n\nexport interface ActuacionData {\n  actId: number\n  anio: number\n  cuij: string\n  documentos: DocumentData[]\n  titulo: string\n}\n\nfunction Actuacion(props: React.PropsWithChildren<ActuacionData>) {\n  return (\n    <Section title={props.titulo}>\n      {props.documentos.map((d) => <Document key={d.URL} {...d} />)}\n    </Section>\n  )\n}\nexport default Actuacion\n","import React, { useState, useEffect } from 'react';\nimport Section from './Section';\nimport Actuacion, { ActuacionData } from './Actuacion';\n\nimport MiniSearch from 'minisearch'\n\nexport interface ExpedienteURL {\n  id: string\n  file: string\n  selected?: boolean\n  search?: string\n}\n\nexport interface ExpedienteData {\n  expId: number\n  caratula: string\n  Actuaciones: ActuacionData[]\n  search?: string\n  minisearch: MiniSearch\n}\n\nexport function ExpedienteLoader(props: ExpedienteURL) {\n  const [data, setData] = useState<ExpedienteData>();\n  const [error, setError] = useState<string>();\n  const [errorIndex, setErrorIndex] = useState<string>();\n\n  const [minisearch, setMinisearch] = useState<MiniSearch | undefined>();\n\n  useEffect(() => {\n    setError(undefined)\n    setData(undefined)\n    fetch(`${process.env.PUBLIC_URL}/data/${props.file}.json`)\n      .then(res => res.json())\n      .then(json => {\n        setData(json)\n      })\n      .catch(e => {\n        setError(e.toString());\n      })\n  }, [props])\n\n  useEffect(() => {\n    setErrorIndex(undefined)\n    fetch(`${process.env.PUBLIC_URL}/data/${props.file}-index.json`)\n      .then(res => res.text())\n      .then(json => {\n        // FIXME: duplicates create-index.ts\n        const ms = MiniSearch.loadJSON(json, {\n          fields: ['content', 'URL'],\n          storeFields: ['content', 'URL', 'ExpId'],\n          idField: 'numeroDeExpediente'\n        })\n        setMinisearch(ms)\n      })\n      .catch(e => {\n        setErrorIndex(e.toString());\n      })\n  }, [props])\n\n  if (error || errorIndex) return (<h2>{error || errorIndex}</h2>)\n  if (data && minisearch) return (<Expediente {...data} search={props.search} minisearch={minisearch}/>)\n  return (<p>loading ...</p>)\n}\n\nfunction Expediente(props: ExpedienteData) {\n  const [actuaciones, setActuaciones] = useState<ActuacionData[]>([])\n\n  useEffect(() => {\n    if (!props.search) {\n      setActuaciones(props.Actuaciones)\n      return\n    }\n    const res = props.minisearch.search(props.search)\n    const actsId = res.map((r) => r.actId)\n    const docsURL = res.map((r) => r.URL)\n    setActuaciones(props.Actuaciones\n      .filter((act) => actsId.includes(act.actId))\n      .map((act) => ({\n        ...act,\n        documentos: act.documentos.filter((d) => docsURL.includes(d.URL))\n      }))\n    )\n  }, [props])\n\n  return (\n    <Section title={props.caratula}>\n      {\n        actuaciones.map((a, i) => (\n          <Actuacion key={i} {...a} />)\n        )\n      }\n    </Section>\n  )\n}\nexport default Expediente\n","import React, { useState, useEffect } from 'react';\nimport searchImg from './images/system-search-symbolic.svg';\nimport './App.css';\nimport Box from './Box';\nimport Section from './Section';\nimport Button from './Button';\n\nimport { ExpedienteURL, ExpedienteLoader } from './Expediente';\n\nfunction App() {\n  const [search, setSearch] = useState(\"\");\n  const [expedientes, setExpedientes] = useState<ExpedienteURL[]>([]);\n  const [selected, setSelected] = useState<ExpedienteURL>();\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    event.preventDefault();\n    setSearch(event.target.value)\n  }\n\n  useEffect(() => {\n    (async () => {\n      const res = await fetch(`${process.env.PUBLIC_URL}/data/expedientes.json`);\n      const json = await res.json();\n      setExpedientes(json)\n    })();\n  }, [])\n\n  useEffect(() => {\n    if (expedientes.length === 1) {\n      setSelected(expedientes[0])\n    }\n  }, [expedientes])\n\n  useEffect(() => {\n    if (!expedientes.length) return;\n    expedientes.forEach((expediente) => {\n      // warm up cache\n      fetch(`${process.env.PUBLIC_URL}/data/${expediente.file}.json`)\n      fetch(`${process.env.PUBLIC_URL}/data/${expediente.file}-index.json`)\n    })\n  }, [expedientes])\n\n\n  return (\n    <div className=\"App\">\n      <Box id=\"title\">\n        <h1>Buscador de Actuaciones de O.D.I.A.</h1>\n      </Box>\n      <Section title=\"expedientes\">\n        {(expedientes.length)\n          ? expedientes.map(({ id }, i) =>\n            <Button key={i}\n              onClick={(e: React.MouseEvent<HTMLElement>) => setSelected(expedientes[i])}\n              selected={selected === expedientes[i]}>\n              {id}\n            </Button>)\n          : <p>loading...</p>}\n        {selected !== undefined && <ExpedienteLoader {...selected} search={search} />}\n      </Section>\n      <div title=\"buscar\">\n        <input type=\"search\" id=\"search-input\" name=\"search\"\n          onChange={handleChange} value={search} placeholder=\"buscar...\" />\n        <img src={searchImg} alt=\"\" />\n        {search}\n      </div>\n    </div >\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}